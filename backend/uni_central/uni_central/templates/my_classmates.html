<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="UTF-8">
  <link rel="icon" href="{% static 'assets/logo_black.png' %}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UniCentral - My Classmates</title>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/my_classmates.css' %}">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Corben:wght@400;700&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Sigmar&family=Sniglet:wght@400;800&display=swap" rel="stylesheet">
  
  <!-- Firebase Auth and Custom JS Modules -->
  <script type="module" src="{% static 'js/auth.js' %}"></script>
  <script type="module" src="{% static 'js/my_classmates.js' %}"></script>
</head>
<body>
  {% include 'partials/navbar.html' %}
  <main class="main-content">
    <section class="hero">
      <div class="text-content">
        <div class="text-container">
          <h1>My Classmates</h1>
        </div>
        <div class="search-bar">
          <p>Search for a classmate</p>
          <input type="text" class="search-input" placeholder="Type a name or class">
          <button class="search-btn">SEARCH &#10140;</button>
        </div>
      </div>
    </section>
    <div class="my-classmates">
      <div class="search-add-classmate">
        <select class="classmate-filter">
          <option value="a-z">A - Z</option>
          <option value="newest-oldest">Newest - Oldest</option>
          <option value="oldest-newest">Oldest - Newest</option>    
        </select>
      </div>
      <div class="classmate-grid">
        <!-- Classmate cards will be dynamically injected here by my_classmates.js -->
      </div>
    </div>
  </main>
  
  <!-- Study Buddy Request Modal -->
  <div class="study-buddy-modal">
    <div class="study-buddy-modal-content">
      <button class="close-modal">&times;</button>
      <form class="study-buddy-form">
        <h3>Send Study Buddy Request</h3>
        <input type="hidden" id="classmate-id" name="classmate-id">
        <input type="hidden" id="classmate-name" name="classmate-name">
        <div class="form-group">
          <label for="course-select">Select a course:</label>
          <select id="course-select" name="course-select" required>
            <option value="">Select a course...</option>
          </select>
        </div>
        <div class="form-group">
          <label for="message">Message:</label>
          <textarea id="message" name="message" placeholder="Hi! Would you like to study together for this course?" required></textarea>
        </div>
        <button type="submit" class="submit-request">Send Request</button>
        <div class="success-message">Study buddy request sent successfully!</div>
      </form>
    </div>
  </div>
  
  <!-- 
    IMPORTANT: The JS file fetches classmates from the endpoint
    /api/my_classmates/<user_email>/.
    If you see a 404 error in your logs (as with /api/my_classmates/joedoe@gmail.com/),
    ensure that your backend defines this route or update the fetch URL in my_classmates.js accordingly.
  -->
</body>
</html>
